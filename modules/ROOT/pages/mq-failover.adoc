= Configuring Cross-Region Failover for Standard Queues

Anypoint MQ Connector provides failover capability for standard queues.

When enabled for a queue, if a Mule app can't reach an Anypoint MQ server in a region, it switches to the fallback queue configured in a fallback region.

== Failover Limitations

* Failover is supported for standard queues only.
* Failover isn't supported for message exchanges.
* Because MuleSoft Government Cloud includes only one region, it does not support failover.
// Canada and Australia (single region) fail over to US and Singapore(?)

== Primary-Fallback Regions

[%header,cols="8,12,12,12,12"]
|===
| Location | Primary Region Name | Primary Region |Fallback Region Name|Fallback Region
5+h| US Control Plane
.4+| North America | US East (N. Virginia)|`us-east-1` | US East (Ohio)|`us-east-2`
                   | US East (Ohio)       |`us-east-2` | US West (Oregon)|`us-west-2`
                   | US West (Oregon)     |`us-west-2`| Canada  (Central)|`ca-central-1`
                   | Canada  (Central)    |`ca-central-1`| US East (N. Virginia)|`us-east-1`
.2+| Europe        | Europe (Ireland)     |`eu-west-1`| Europe (London)|`eu-west-2`
                   | Europe (London)      |`eu-west-2`| Europe (Ireland)|`eu-west-1` 
.3+| APAC          | Asia Pacific (Singapore) |`ap-southeast-1`| Asia Pacific (Tokyo)|`ap-northeast-1`
                   | Asia Pacific (Sydney) |`ap-southeast-2`| Asia Pacific (Singapore)|`ap-southeast-1`
                   | Asia Pacific (Tokyo)  |`ap-northeast-1`| Asia Pacific (Sydney)|`ap-southeast-2`
5+h| EU Control Plane
.2+| Europe        | Europe (Frankfurt)    |`eu-central-1`| Europe (Ireland)|`eu-west-1`
                   | Europe (Ireland)      |`eu-west-1`| Europe (Frankfurt)|`eu-central-1` 
|===


== Enable Failover for a Queue

To enable failover for a new or existing queue:

. Sign in to Anypoint Platform and click *MQ* in the navigation menu.
. Click *Destinations*.
. Create or modify an existing queue:
+
.Create a queue.
[%collapsible]
====
.. Click the *Add* icon to display the menu:
+
image::mq-blue-create.png["Add icon"]
.. Select *Queue*.
+
Anypoint MQ supports failover for standard queues only.
.. Complete the fields in *Create Queue*.
+
For information about queue settings, see xref:mq-queues.adoc#create-a-queue[Create a Queue].
+
.. Select *Enable Cross-Region Failover*:
+
image::mq-create-queues-failover.png["Create Queue popup dialog box with option failover selected"]
// replace screenshot
.. Click *Create Queue*.
+ 
Anypoint MQ creates the queue in the *Destinations* page and displays the queue information in the details pane.
Anypoint MQ also creates a fallback queue in the fallback region:
====
+
.Modify an existing queue.
[%collapsible]
====
.. Click the queue name.
+
Anypoint MQ supports failover for standard queues only.
+
.. In the *Queue Settings* page, select *Enable Cross-Region Failover*:
+
image::mq-create-queues-failover.png["Create Queue popup dialog box with option failover selected"]
// replace screenshot
.. Click *Save Changes*.
+
Anypoint MQ updates the queue settings and creates a fallback queue in the fallback region.
.. Click *Destinations*.
.. Click the queue type to display its details, including the fallback queue.
====
+
The queue details pane includes the fallback queue:
+
image::mq-queue-details-fallback.png["Details pane for the new queue with the fallback queue and region"]


== See Also

* xref:anypoint-mq-connector::anypoint-mq-connector-reference.adoc[Anypoint MQ Connector 4.x Reference]
* xref:connectors::anypoint-mq/3.x/anypoint-mq-connector-reference.adoc[Anypoint MQ Connector 3.x Reference]
* xref:mq-queues.adoc[]